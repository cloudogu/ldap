{
  "Name": "official/ldap",
  "Version": "2.6.8-3",
  "DisplayName": "OpenLDAP",
  "Description": "OpenLDAP server for user and group management.",
  "Url": "http://www.openldap.org",
  "Category": "Base",
  "Tags": [
    "authentication",
    "ldap",
    "users",
    "groups"
  ],
  "Logo": "https://cloudogu.com/images/dogus/openldap.png",
  "Image": "registry.cloudogu.com/official/ldap",
  "Dependencies": [
    {
      "type": "dogu",
      "name": "postfix"
    }
  ],
  "Configuration": [
    {
      "Name": "container_config/cpu_core_limit",
      "Description": "Limits the container's CPU core usage. Use a positive floating value describing a fraction of 1 CPU core. When you define a value of '0.5', you are requesting half as much CPU time compared to if you asked for '1.0' CPU.",
      "Optional": true
    },
    {
      "Name": "container_config/cpu_core_request",
      "Description": "Requests the container's minimal CPU core requirement. Use a positive floating value describing a fraction of 1 CPU core. When you define a value of '0.5', you are requesting half as much CPU time compared to if you asked for '1.0' CPU.",
      "Optional": true,
      "Default": "0.025"
    },
    {
      "Name": "container_config/memory_limit",
      "Description": "Limits the container's memory usage. Use a positive integer value followed by one of these units [b,k,m,g] (byte, kibibyte, mebibyte, gibibyte).",
      "Optional": true,
      "Validation": {
        "Type": "BINARY_MEASUREMENT"
      },
      "Default": "101m"
    },
    {
      "Name": "container_config/memory_request",
      "Description": "Requests the container's minimal memory requirement. Use a positive integer value followed by one of these units [b,k,m,g] (byte, kibibyte, mebibyte, gibibyte).",
      "Optional": true,
      "Validation": {
        "Type": "BINARY_MEASUREMENT"
      },
      "Default": "101m"
    },
    {
      "Name": "container_config/storage_limit",
      "Description": "Limits the container's ephemeral storage usage. Use a positive integer value followed by one of these units [b,k,m,g] (byte, kibibyte, mebibyte, gibibyte).",
      "Optional": true,
      "Validation": {
        "Type": "BINARY_MEASUREMENT"
      }
    },
    {
      "Name": "container_config/storage_request",
      "Description": "Requests the container's minimal ephemeral storage requirement. Use a positive integer value followed by one of these units [b,k,m,g] (byte, kibibyte, mebibyte, gibibyte).",
      "Optional": true,
      "Validation": {
        "Type": "BINARY_MEASUREMENT"
      }
    },
    {
      "Name": "container_config/swap_limit",
      "Description": "Limits the container's swap memory usage. Use zero or a positive integer value followed by one of these units [b,k,m,g] (byte, kibibyte, mebibyte, gibibyte). 0 will disable swapping.",
      "Optional": true,
      "Validation": {
        "Type": "BINARY_MEASUREMENT"
      }
    },
    {
      "Name": "password_change/notification_enabled",
      "Description": "Enables the e-mail notification when a users password was changed",
      "Optional": true,
      "Default": "true",
      "Validation": {
        "Type": "ONE_OF",
        "Values": [
          "true",
          "false"
        ]
      }
    },
    {
      "Name": "password_change/check_interval_minutes",
      "Description": "Interval in minutes at which password changes will be checked [default: 1]",
      "Optional": true,
      "Default": "1"
    },
    {
      "Name": "password_change/mail_sender_address",
      "Description": "Sender address of the e-mail sent to the user after a password change.",
      "Optional": true
    },
    {
      "Name": "password_change/mail_sender_name",
      "Description": "Sender name of the e-mail sent to the user after a password change.",
      "Optional": true
    },
    {
      "Name": "password_change/mail_subject",
      "Description": "Subject of the e-mail sent to the user after a password change.",
      "Optional": true
    },
    {
      "Name": "password_change/mail_text",
      "Description": "Text of the e-mail sent to the user after a password change. As placeholders, '%uid' can be used for the user ID (user name) and '%name' for the complete name (cn).",
      "Optional": true
    },
    {
      "Name": "logging/root",
      "Description": "Set the root log level to one of ERROR, WARN, INFO, DEBUG.",
      "Optional": true,
      "Default": "INFO",
      "Validation": {
        "Type": "ONE_OF",
        "Values": [
          "WARN",
          "DEBUG",
          "INFO",
          "ERROR"
        ]
      }
    },
    {
      "Name": "user_search_size_limit",
      "Description": "Set how many users can be retrieved in a single search operation",
      "Optional": true,
      "Default": "4000"
    },
    {
      "Name": "max_db_size",
      "Description": "Specify the maximum size of the database in bytes. A memory map of this size is allocated at startup time and the database will not be allowed to grow beyond this size.",
      "Optional": true,
      "Default": "104857600"
    },
    {
      "Name": "rootpwd",
      "Description": "The LDAP root password (olcRootPW). If left unset, a random password will be generated.",
      "Optional": true,
      "Encrypted": true
    },
    {
      "Name": "admin_username",
      "Description": "The username of the CES admin. Usually, this is set during setup.",
      "Optional": true,
      "Default": "admin"
    },
    {
      "Name": "admin_member",
      "Description": "Specifies if the CES admin is also admin in other dogus.",
      "Optional": true,
      "Default": "false"
    },
    {
      "Name": "admin_givenname",
      "Description": "Specifies the givenName attribute of the CES admin in the LDAP.",
      "Optional": true,
      "Default": "admin"
    },
    {
      "Name": "admin_surname",
      "Description": "Specifies the sn attribute of the CES admin in the LDAP.",
      "Optional": true,
      "Default": "admin"
    },
    {
      "Name": "admin_displayname",
      "Description": "Specifies the displayName attribute of the CES admin in the LDAP.",
      "Optional": true,
      "Default": "admin"
    },
    {
      "Name": "admin_mail",
      "Description": "Specifies the mail attribute of the CES admin in the LDAP. Defaults to <admin_username>@<ces-domain>.",
      "Optional": true
    },
    {
      "Name": "admin_password",
      "Description": "Specifies the userPassword attribute of the CES admin in the LDAP.",
      "Optional": false,
      "Encrypted": true
    },
    {
      "Name": "openldap_suffix",
      "Description": "Specifies general suffix used for the ldap hierarchy.",
      "Optional": true,
      "Default": "dc=cloudogu,dc=com"
    }
  ],
  "Volumes": [
    {
      "Name": "db",
      "Path": "/var/lib/openldap",
      "Owner": "100",
      "Group": "101",
      "NeedsBackup": true
    },
    {
      "Name": "config",
      "Path": "/etc/openldap/slapd.d",
      "Owner": "100",
      "Group": "101",
      "NeedsBackup": true
    },
    {
      "Name": "crontab-logs",
      "Path": "/tmp/logs",
      "Owner": "100",
      "Group": "101",
      "NeedsBackup": false
    },
    {
      "Name": "localConfig",
      "Path": "/var/ces/config",
      "Owner": "100",
      "Group": "101",
      "NeedsBackup": true
    }
  ],
  "ExposedCommands": [
    {
      "Name": "service-account-create",
      "Description": "Creates a new service account",
      "Command": "/srv/openldap/create-sa.sh"
    },
    {
      "Name": "service-account-remove",
      "Description": "Removes a service account",
      "Command": "/srv/openldap/remove-sa.sh"
    },
    {
      "Name": "pre-upgrade",
      "Command": "/pre-upgrade.sh"
    },
    {
      "Name": "post-upgrade",
      "Command": "/post-upgrade.sh"
    }
  ],
  "HealthChecks": [
    {
      "Type": "tcp",
      "Port": 389
    },
    {
      "Type": "state"
    }
  ]
}
